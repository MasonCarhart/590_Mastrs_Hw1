---
title: "590 HW1"
author: "Austin Turvy Derek Holste Mason Carhart"
date: "4/13/2021"
output: pdf_document
---



```{r Packages}
# Load packages
library(pacman)
p_load(readr, data.table, dplyr, janitor, haven, here, tidyverse, skimr, lfe, stargazer)


```



```{r Data}
# Load data
af = read_dta(here("afghanistan_anonymized_data.dta")) 

```


gen nonoutlier = 1 
replace nonoutlier = 0 if f07_num_ppl_hh_cnt > 20 & f07_observed == 1
replace nonoutlier = 0 if f07_jeribs_cnt > 10 & f07_observed == 1
replace nonoutlier = 0 if f07_num_sheep_cnt > 50 & f07_observed == 1
replace nonoutlier = 0 if s08_num_ppl_hh_cnt > 20 & s08_observed == 1
replace nonoutlier = 0 if s08_jeribs_cnt > 10 & s08_observed == 1
replace nonoutlier = 0 if s08_num_sheep_cnt > 50 & s08_observed == 1




```{r, nonoutlier column}
# Create nonoutlier column
af <- af %>% mutate(nonoutlier= ifelse((f07_num_ppl_hh_cnt > 20 & f07_observed == 1) |
                                    (f07_jeribs_cnt > 10 & f07_observed == 1)|
                                    (f07_num_sheep_cnt > 50 & f07_observed == 1)|
                                      (s08_num_ppl_hh_cnt > 20 & s08_observed == 1)|
                                      (s08_jeribs_cnt > 10 & s08_observed == 1) |
                                      (s08_num_sheep_cnt > 50 & s08_observed == 1)
                                      ,0,1))


```

```{r Results, echo=FALSE, results = 'asis'}

# Run regression for table 4
reg1 = felm(f07_formal_school ~ treatment + chagcharan | 0 | 0 | clustercode, 
            data = af %>% filter(f07_girl_cnt ==1 & 
                                 nonoutlier ==1 & 
                                 f07_test_observed ==1))

# Create Stargazer Table
stargazer(reg1, keep.stat = c('n', 'rsq'),title = "Regression Results",
          covariate.labels = c('Treatment', "chagcharan"),
          dep.var.labels = c('Girl Enrolled in Formal School Fall 2007'), type = 'latex', header = FALSE, float = TRUE,  notes = "S.E Clustered by village")

#Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
```


```{r}

reg1 = lm(  , data = af)


```












