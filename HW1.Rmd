---
title: "590 HW1"
author: "Austin Turvy Derek Holste Mason Carhart"
date: "4/13/2021"
output: pdf_document
---



```{r Packages}
# Load packages
library(pacman)
p_load(readr, data.table, dplyr, janitor, haven, here, tidyverse, skimr, lfe, stargazer)

```



```{r Data}
# Load data
af = read_dta(here("afghanistan_anonymized_data.dta")) 

```


1.
An outlier observation is someone who had more than 50 sheep or goats owned by the household in 2007 and in the fall of 2007 or had more than 10 jeribs of land owned by the household in the fall of 2007 or had more than 20 poeple in the houdcount in fall of 2007  or a person that has number of people in a household greater than 20 and are observed in summer of 2008. Or if number of jerribs of land counted is more than 10 and are observed in summer of 2008. Lastly if the number of sheep and goats is above 50 and they are observed in summer of 2008.

```{r, Create nonoutlier columns}
# Create nonoutlier column
af <- af %>% mutate(nonoutlier= ifelse((f07_num_ppl_hh_cnt > 20 & f07_observed == 1) |
                                    (f07_jeribs_cnt > 10 & f07_observed == 1)|
                                    (f07_num_sheep_cnt > 50 & f07_observed == 1)|
                                      (s08_num_ppl_hh_cnt > 20 & s08_observed == 1)|
                                      (s08_jeribs_cnt > 10 & s08_observed == 1) |
                                      (s08_num_sheep_cnt > 50 & s08_observed == 1)
                                      ,0,1))

```


```{r}

mytable <- table(af$nonoutlier,af$nonoutlier) 
mytable 

```
There are 76 non-outliers in the data given the specifications prior.

```{r Results, echo=FALSE, results = 'asis'}

# Run girls regression for table 4
reg1 = felm(f07_formal_school ~ treatment + chagcharan | 0 | 0 | clustercode, 
            data = af %>% filter(f07_girl_cnt == 1 & 
                                 nonoutlier == 1 & 
                                 f07_test_observed == 1))

# Run boys regression for table 4
reg2 = felm(f07_formal_school ~ treatment + chagcharan | 0 | 0 | clustercode, 
            data = af %>% filter(f07_girl_cnt == 0 & 
                                 nonoutlier == 1 & 
                                 f07_test_observed == 1))

# Create Stargazer Table
stargazer(reg1, reg2, keep.stat = c('n', 'rsq'),title = "Regression Results",
          covariate.labels = c('Treatment', "chagcharan"),
          dep.var.labels = c('Girl Enrolled in Formal School Fall 2007', 'Boy Enrolled in Formal School Fall 2007'), 
          type = 'latex', header = FALSE, float = TRUE,  notes = "S.E Clustered by village")

#Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
```









